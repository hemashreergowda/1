------------Client-----------

import java.net.*;

public class DhcpClient {
    private static String toMacAddress(byte[] mac) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < mac.length; i++) {
            sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));
        }
        return sb.toString();
    }
    public static void main(String[] args) throws Exception {
        InetAddress localAddress = InetAddress.getLocalHost();
        NetworkInterface ni = NetworkInterface.getByInetAddress(localAddress);
        byte[] mac = ni.getHardwareAddress();

        byte[] buffer = (toMacAddress(mac) + "   ").getBytes();
        InetAddress serverAddress = InetAddress.getByName("localhost");
        DatagramPacket packet = new DatagramPacket(buffer, buffer.length, serverAddress, 4444);
        DatagramSocket client = new DatagramSocket();
        client.send(packet);
        client.receive(packet);
        System.out.println("\nThe Logical Address is: " + new String(packet.getData()).trim());
    }
}



------------Server-----------

import java.net.*;
import java.util.Random;

public class DhcpServer {
    public static void main(String[] args) throws Exception {
        DatagramSocket server = new DatagramSocket(4444);
        String[] ips = {"192.168.1.1", "192.168.1.2", "192.168.1.3", "192.168.1.4", "192.168.1.5"};
        Random rand = new Random();
        
        while (true) {
            byte[] buffer = new byte[1024];
            DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
            server.receive(packet);
            String clientMac = new String(packet.getData()).trim();
            String allocatedIp = ips[rand.nextInt(ips.length)];
            System.out.println("Server allocating IP Address to: " + clientMac + " as " + allocatedIp + " lease time->24hrs");
            packet.setData((allocatedIp + "        ").getBytes());
            server.send(packet);
        }
    }
}

